* { box-sizing: border-box; }
:root {
  --bg: #0b0f14; --bg2: #0e1420; --panel: rgba(18,24,34,0.75); --muted: #8aa0bd; --text: #e8f0ff; --accent: #4ea1ff; --accent2: #00dbde; --border: #1f2a3a; --shadow: 0 10px 30px rgba(0,0,0,.35);
}
html, body { height: 100%; }
body {
  margin: 0; color: var(--text); font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, sans-serif;
  background: radial-gradient(1200px 800px at -10% -20%, #0e2038, transparent), linear-gradient(160deg, var(--bg), var(--bg2));
}

/* Top bar */
.topbar { position: sticky; top: 0; z-index: 10; display: flex; align-items: center; justify-content: space-between; padding: 10px 16px; border-bottom: 1px solid var(--border); background: linear-gradient(180deg, rgba(13,18,28,0.9), rgba(13,18,28,0.6)); backdrop-filter: blur(8px); }
.topbar .left { display: flex; align-items: center; gap: 10px; }
.topbar .right { display: flex; align-items: center; gap: 12px; }
.brand { font-weight: 800; letter-spacing: .3px; }
.select { display: flex; align-items: center; gap: 8px; color: var(--muted); font-size: 0.9rem; }
.select select { background: #0b1320; color: var(--text); border: 1px solid var(--border); border-radius: 8px; padding: 6px 8px; }

.app { display: grid; grid-template-columns: 300px 1fr; height: calc(100vh - 56px); }
.sidebar { backdrop-filter: blur(10px); background: var(--panel); border-right: 1px solid var(--border); padding: 16px; display: flex; flex-direction: column; gap: 16px; box-shadow: var(--shadow); }
.history { flex: 1; overflow: auto; }
.history-header { display: flex; align-items: center; justify-content: space-between; }
.history h3 { color: var(--muted); font-weight: 700; font-size: 0.9rem; margin: 8px 0; }
#historyList { list-style: none; padding: 0; margin: 0; display: grid; gap: 6px; }
#historyList li { padding: 10px 10px; border-radius: 10px; cursor: pointer; border: 1px solid transparent; background: rgba(10,16,26,0.6); }
#historyList li:hover { border-color: var(--border); background: rgba(12,18,28,0.9); }

button { background: linear-gradient(135deg, var(--accent), var(--accent2)); color: white; border: none; padding: 10px 14px; border-radius: 10px; cursor: pointer; font-weight: 700; box-shadow: 0 6px 20px rgba(78,161,255,.25); }
button.muted { background: transparent; color: var(--muted); border: 1px solid var(--border); box-shadow: none; }
button.small { padding: 6px 10px; border-radius: 8px; font-size: 0.85rem; }
button:disabled { opacity: 0.6; cursor: not-allowed; }

.main { display: grid; grid-template-rows: 1fr auto; grid-template-columns: 1fr; }
.chat { padding: 16px; display: grid; grid-template-rows: 1fr auto auto; gap: 12px; }
.messages { background: rgba(10,16,26,0.55); border: 1px solid var(--border); border-radius: 16px; padding: 16px; overflow: auto; box-shadow: var(--shadow); }
.msg { padding: 12px 14px; border-radius: 12px; margin: 8px 0; max-width: 80%; line-height: 1.55; }
.msg.user { background: linear-gradient(135deg, rgba(78,161,255,.15), rgba(0,219,222,.12)); border: 1px solid rgba(78,161,255,.35); margin-left: auto; }
.msg.assistant { background: rgba(255,255,255,.04); border: 1px solid var(--border); }

.ask { display: grid; grid-template-columns: 1fr auto; gap: 10px; }
.ask input { padding: 14px 14px; border-radius: 12px; border: 1px solid var(--border); background: rgba(10,16,26,0.8); color: var(--text); box-shadow: inset 0 0 0 999px rgba(255,255,255,0.02); }
.ask button { padding: 12px 18px; }
.status { color: var(--muted); font-size: 0.9rem; min-height: 1.2rem; }

.answer { border-top: 1px solid var(--border); padding: 16px; }
.answer h2 { margin: 0 0 8px 0; font-size: 1rem; color: var(--muted); }
#answer { white-space: pre-wrap; line-height: 1.7; }
.sources { margin-top: 12px; display: grid; gap: 10px; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); }
.source { background: rgba(10,16,26,0.55); border: 1px solid var(--border); border-radius: 12px; padding: 12px; box-shadow: var(--shadow); }
.source a { color: var(--accent); text-decoration: none; }

/* Toasts */
.toasts { position: fixed; right: 16px; bottom: 16px; display: grid; gap: 10px; z-index: 50; }
.toast { background: rgba(14,20,32,0.9); border: 1px solid var(--border); color: var(--text); padding: 10px 12px; border-radius: 10px; box-shadow: var(--shadow); animation: slideIn .2s ease-out; }
@keyframes slideIn { from { transform: translateY(10px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

/* Header buttons */
#sidebarToggle, #themeToggle { background: rgba(10,16,26,0.65); border: 1px solid var(--border); padding: 8px 10px; border-radius: 10px; }

/* Responsive */
@media (max-width: 1000px) {
  .app { grid-template-columns: 1fr; }
  .sidebar { position: fixed; left: 0; top: 56px; bottom: 0; width: 300px; transform: translateX(-100%); transition: transform .2s ease; z-index: 20; }
  .sidebar.open { transform: translateX(0); }
}
